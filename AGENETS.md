# プロジェクト概要
このプロジェクトはCLI版のパスワードマネージャアプリケーションを開発するプロジェクトです。

## 主な技術スタック
- データベース: redb
- シリアライザ基盤: serde
- シリアライザ: MessagePack, YAML
- Webサーバ: ActixWeb

---

## 仕様と参照文書について
関連ドキュメントは`doc`ディレクトリに格納しています。各Markdownファイルは`doc`ディレクトリの物を指していると考えてください。

 - このプロジェクトに関する要求仕様・機能定義・制約事項は、`REQUIREMENTS.md` に記載されています。  
 - 基本設計に関しては `DESIGN.md` に記載されています。

## コード生成の注意・制約事項
設計・実装・提案・コード生成を行う際は、以下を遵守してください。

- 常に `REQUIREMENTS.md` の内容を前提とし、仕様に沿って検討すること
- 要求が曖昧、または仕様との整合性が取れない場合は、REQUIREMENTS.mdの該当箇所を参照し、必要に応じて確認すること
- 仕様と本ファイル（AGENTS.md）の間に矛盾がある場合は、`REQUIREMENTS.md` を優先すること
- REQUIREMENTS.md に記載されていない事項は、推測せず質問を行い確認すること
- 日本語でコメントを記述する際のエンコーディングはBOM無しのUTF-8を用いること
- 文字コードを変更するエディタ設定や変換ツールを使用しないこと（特に CP932/Shift-JIS への再保存禁止）
- 外部から貼り付ける際も UTF-8 (BOMなし) であることを確認すること
- 置換文字（�）が入っていないか、保存後に簡易チェック（rg '\ufffd' や grep）を行うこと。
- 既存ファイルのエンコーディングを変えない（新規追加・修正箇所だけ UTF-8/BOMなしを維持）
- 改行コードはLF文字のみにすること
- コメント記述種別の追加分けは以下の方針に則ること
  - 処理ステップを表すコメントはブロックコメントで記述すること
  - 処理に対する注釈はラインコメントで記述すること

※設計や内部構造に関する情報は、将来的に `ARCHITECTURE.md` に分離される可能性があります。

### ドキュメントコメントの指針
ファイル先頭には©ヘッダを置き、以下の様なモジュール内容を要約したモジュールヘッダを記述してください。

```rust
//!
//! コマンドライン引数を取り扱うモジュール
//!
```

以下の様に、関数(メソッド)/enum/構造体のドキュメントコメントに対しては、先頭にと終端に"///"だけの行を付与し目立つようにしてください。

```rust
///
/// デフォルトのコンフィグレーションファイルのパス情報を生成
///
/// # 戻り値
/// コンフィギュレーションファイルのパス情報
///
fn default_config_path() -> PathBuf {
    DEFAULT_CONFIG_PATH.join("config.toml")
}
```

関数(メソッド)のドキュメントコメントについて、以下のセクションは必須とします。いずれも、単位が必要な場合は説明末尾に括弧書きで単位を表してください。

 - 引数(存在しない場合は記述しないでください)
 - 戻り値

エラーを返す関数で特記すべきことがある場合は戻り値のセクションに注記をお願いします。

関数のサイズが20行を超える場合は、「概要」セクションを設け処理内容の概要や関数の目的を記述してください。またミュータブルメソッドの場合で必要と思われる場合は呼び出しによって何が変更されるのかを明記してください。

---

## コーディング規約
rustfmtによる標準的なコードフォーマットスタイルを定めた以下のRFCに則ります。

  - RFC 2436
  - RFC 1574
  - RFC 0505

ただし、以下のローカルルールを適用します。これに合わせてrustfmtの設定を事前に作成してください。

  - ソースコードの横幅の制限は80桁とします。
  - useの書き方ですが以下の規則に則ってください。
      - 標準ライブラリ, 公開パッケージ, ローカルクレートの順でグルーピングする
      - グループ間に改行を挿入し区分する
      - グループ内の各要素はアルファベット順にソートする

---

## ディレクトリ構成
  - src/ : ソースコード格納ディレクトリ
  - data/ : 埋め込み用データ格納ディレクトリ
  - tests/ : テストコード格納ディレクトリ
  - docs/ : 要求仕様や設計資料を格納するディレクトリ（REQUIREMENTS.md / ARCHITECTURE.md など）

---

## コマンド
  - `cargo build` : プロジェクトをビルドします
  - `cargo test` : テストを実行します
  - `cargo run` : プログラムを実行します

---

## ChatGPT / Codexを用いた支援について
コード生成・リファクタリング・設計の検討を行う場合、以下を守ってください。

- 必ず REQUIREMENTS.md の仕様に基づいて設計・生成を行うこと
- 仕様で禁止されている設計やライブラリを提案しないこと
- 不確実要素がある場合は推測せず、質問または選択肢を提示すること
- 生成したコードはRustのコンパイル・警告・テストを考慮した構造とすること

